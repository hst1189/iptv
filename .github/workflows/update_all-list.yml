name: Update all list
on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 1 1 *'  #æ¯Žæœˆ1æ—¥0æ™‚å®Ÿæ–½

jobs:
  update-all-list:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout local repo ðŸ¾
        uses: actions/checkout@v4
        with:
          ref: main
          path: local

      - name: Checkout remote repo@iptv-org/iptv ðŸš€
        uses: actions/checkout@v4
        with:
          repository: iptv-org/iptv
          ref: gh-pages
          path: remote1

      - name: Checkout remote repo@Free-TV/IPTV ðŸš€
        uses: actions/checkout@v4
        with:
          repository: Free-TV/IPTV
          ref: master
          path: remote2

      - name: Checkout remote repo@imDazui/Tvlist-awesome-m3u-m3u8 ðŸš€
        uses: actions/checkout@v4
        with:
          repository: Free-TV/IPTV
          ref: master
          path: remote3

      - name: Checkout remote repo@fanmingming/live ðŸš€
        uses: actions/checkout@v4
        with:
          repository: fanmingming/live
          ref: main
          path: remote4

      - name: Copy files ðŸšš
        run: |
          cp -rfp ${GITHUB_WORKSPACE}/remote1/*                 ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote2/lists             ${GITHUB_WORKSPACE}/local/api  > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote2/playlists         ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote2/*.m3u             ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote2/*.m3u8            ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote3/m3u8/*.m3u        ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote3/m3u8/*.m3u8       ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote4/tv/m3u/*.m3u      ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote4/tv/m3u/*.m3u8     ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote4/radio/m3u/*.m3u   ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1
          cp -rfp ${GITHUB_WORKSPACE}/remote4/radio/m3u/*.m3u8  ${GITHUB_WORKSPACE}/local/work > /dev/null 2>&1


      - name: Commit & Push changes ðŸ”¥
        uses: Andro999b/push@v1.3
        with:
          branch: main
          directory: ${{ github.workspace }}/local/
          github_token: ${{ secrets.GITHUB_TOKEN }}
          message: 'ðŸš€ auto publish by bot'
