name: Build and Deploy
on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout local repo ğŸ¾
        uses: actions/checkout@v4
        with:
          ref: main
          path: local
      - name: Checkout remote repo ğŸš€
        uses: actions/checkout@v4
        with:
          repository: iptv-org/iptv
          ref: gh-pages
          path: remote
      - name: Copy files ğŸšš
        run: |
          cp -pr ${GITHUB_WORKSPACE}/remote/* ${GITHUB_WORKSPACE}/local/docs
          ls -l  ${GITHUB_WORKSPACE}
          ls -lR ${GITHUB_WORKSPACE}/local
      - name: Commit & Push changes ğŸ”¥
        uses: Andro999b/push@v1.3
        with:
          directory: ${GITHUB_REPOSITORY}/local
          github_token: ${{ secrets.GITHUB_TOKEN }}
          message: 'chore: auto publish by bot ${date}'
